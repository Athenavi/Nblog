<!-- 页脚 -->
<footer class="bg-white py-12 mt-12 dark:bg-dark-800 dark:text-gray-300">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <div class="flex items-center space-x-2 mb-4">
                    <i class="fas fa-blog text-primary text-2xl dark:text-primary-dark"></i>
                    <span class="text-xl font-bold text-gray-800 dark:text-gray-200">nblog</span>
                </div>
                <p class="text-gray-600 dark:text-gray-400 mb-4">
                    nblog 是一个基于 Django 框架的个人博客系统，使用 Markdown 语法编写文章，支持代码高亮，图片上传，评论系统等功能。
                </p>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </div>
            </div>

            <div>
                <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-white">导航</h3>
                <ul class="space-y-2">
                    <li><a href="#"
                           class="text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary-dark transition-colors">首页</a>
                    </li>
                    <li><a href="#"
                           class="text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary-dark transition-colors">文章分类</a>
                    </li>
                    <li><a href="#"
                           class="text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary-dark transition-colors">热门话题</a>
                    </li>
                    <li><a href="#"
                           class="text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary-dark transition-colors">关于我们</a>
                    </li>
                </ul>
            </div>

            <div>
                <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-white">资源</h3>
                <ul class="space-y-2">
                    <li><a href="#"
                           class="text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary-dark transition-colors">开发文档</a>
                    </li>
                    <li><a href="#"
                           class="text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary-dark transition-colors">设计资源</a>
                    </li>
                    <li><a href="#"
                           class="text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary-dark transition-colors">学习路径</a>
                    </li>
                    <li><a href="#"
                           class="text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary-dark transition-colors">社区论坛</a>
                    </li>
                </ul>
            </div>

            <div>
                <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-white">订阅更新</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4">
                    订阅我们的新闻通讯，获取最新文章和更新。
                </p>
                <form class="flex">
                    <input type="email" placeholder="您的邮箱地址"
                           class="px-4 py-2 w-full rounded-l-lg border focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                    <button type="submit"
                            class="bg-primary text-white px-4 py-2 rounded-r-lg hover:bg-primary-dark transition-colors dark:bg-primary-dark dark:hover:bg-primary">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </form>
            </div>
        </div>

        <div class="border-t border-gray-200 dark:border-gray-700 mt-12 pt-8 text-center">
            <p class="text-gray-600 dark:text-gray-400">
                &copy; 2023 nblog. 保留所有权利。
            </p>
            <p class="mt-2 text-sm text-gray-500 dark:text-gray-500">
                当前主题: <span id="current-theme" class="font-medium">系统默认</span>
            </p>
        </div>
    </div>
</footer>

<script>
    // 主题切换功能
    document.addEventListener('DOMContentLoaded', function () {
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const openIcon = document.getElementById('open-icon');
        const closeIcon = document.getElementById('close-icon');
        const themeToggle = document.getElementById('theme-toggle');
        const currentThemeSpan = document.getElementById('current-theme');

        // 移动菜单切换
        mobileMenuBtn.addEventListener('click', () => {
            const isOpen = mobileMenu.classList.contains('h-0');

            if (isOpen) {
                mobileMenu.classList.remove('h-0');
                mobileMenu.style.height = 'auto';
                const height = mobileMenu.scrollHeight + 'px';
                mobileMenu.style.height = '0';

                // 触发重绘
                mobileMenu.offsetHeight;

                mobileMenu.style.height = height;
                setTimeout(() => {
                    mobileMenu.style.height = 'auto';
                }, 300);
            } else {
                mobileMenu.style.height = mobileMenu.scrollHeight + 'px';

                // 触发重绘
                mobileMenu.offsetHeight;

                mobileMenu.style.height = '0';
                setTimeout(() => {
                    mobileMenu.classList.add('h-0');
                }, 300);
            }

            openIcon.classList.toggle('hidden');
            closeIcon.classList.toggle('hidden');
        });

        // 主题管理
        function applyTheme(theme) {
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                currentThemeSpan.textContent = '深色模式';
            } else if (theme === 'light') {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                currentThemeSpan.textContent = '浅色模式';
            } else {
                localStorage.removeItem('theme');
                if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark');
                    currentThemeSpan.textContent = '系统深色';
                } else {
                    document.documentElement.classList.remove('dark');
                    currentThemeSpan.textContent = '系统浅色';
                }
            }
        }

        // 初始化主题
        const savedTheme = localStorage.getItem('theme');
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (savedTheme) {
            applyTheme(savedTheme);
        } else {
            applyTheme(systemDark ? 'dark' : 'light');
        }

        // 主题切换按钮
        themeToggle.addEventListener('click', () => {
            const isDark = document.documentElement.classList.contains('dark');
            applyTheme(isDark ? 'light' : 'dark');
        });

        // 监听系统主题变化
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            if (!localStorage.getItem('theme')) {
                applyTheme(e.matches ? 'dark' : 'light');
            }
        });

        // 初始化代码高亮
        hljs.highlightAll();
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const menuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const openIcon = document.getElementById('open-icon');
        const closeIcon = document.getElementById('close-icon');
        menuBtn.addEventListener('click', toggleMobileMenu);

        function toggleMobileMenu() {
            const isExpanded = mobileMenu.style.height !== '0px' && mobileMenu.style.height !== '';

            // 切换菜单高度
            if (isExpanded) {
                mobileMenu.style.height = '0';
            } else {
                mobileMenu.style.height = mobileMenu.scrollHeight + 'px';
            }

            // 切换图标
            openIcon.classList.toggle('hidden');
            closeIcon.classList.toggle('hidden');

            // 更新aria-expanded属性
            menuBtn.setAttribute('aria-expanded', String(!isExpanded));
        }

        // 点击导航链接时添加active类
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function () {
                document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
                this.classList.add('active');

                // 如果是移动端菜单，点击后关闭菜单
                if (this.parentElement.parentElement.id === 'mobile-menu') {
                    mobileMenu.style.height = '0';
                    openIcon.classList.remove('hidden');
                    closeIcon.classList.add('hidden');
                    menuBtn.setAttribute('aria-expanded', 'false');
                }
            });
        });
    });
</script>